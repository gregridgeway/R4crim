{
  "hash": "a4a8bb4602ed53c18d1d6dca69be54ab",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Regular Expressions\"\nauthor:\n- affiliation: University of Pennsylvania\n  email: gridge@upenn.edu\n  name: Greg Ridgeway\n- affiliation: University of Pennsylvania\n  email: moyruth@upenn.edu\n  name: Ruth Moyer\ndate: \"August 14, 2025\"\nformat:\n  html:\n    theme: \n      dark: darkly\n      light: default\n    toc: true\n    html-math-method: mathjax\n  pdf:\n    toc: true\n    prefer-html: true\nnumber-sections: true\neditor_options: \n  chunk_output_type: console\nbibliography: G:/My Drive/docs/Greg/articles/mybib.bib\n---\n\n\n\n\n<!-- In terminal -->\n<!-- quarto render 05_Regular_expressions.qmd -->\n\n<!-- git commit 05-* -m \"commit message\" -->\n<!-- git status -->\n<!-- git push -->\n\n<!-- A function for automating the numbering and wording of the exercise questions -->\n<!-- Use \\x60 inside exercise questions for backticks -->\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n# Introduction\n\nA regular expression is a sequence of characters that defines a search pattern. Sometimes we use regular expressions to help us find a pattern in text that we want, like the Find functionality in Word. Other times, we use a regular expression to help us find and *replace* a piece of text, like the Find and Replace functionality in Word. The two main R functions that we will learn about are `grep()` and `gsub()`. You may use them in verb form (e.g., \"I need to grep all the gun cases,\" \"I was grepping like crazy to find all the opioid cases,\" \"I first had to gsub the commas with semicolons\"). Regular expressions are available in numerous other software packages, so everything you learn here will port over to using regular expressions in Linux, Stata, Python, Java, ArcGIS, and many others.\n\nWe have already used regular expressions in previous work that we have done. We wanted to select protests in Philadelphia and ran\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataProtest |>\n  filter(grepl(\"Philadelphia, PA\", Location))\n```\n:::\n\n\n\nWhen working with NIBRS we cleaned up the column names that had multiple periods in them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfmtNames <- fmt$Description |>\n   strsplit(split = \" - \", fixed = TRUE) |>\n   sapply(head, n=1) |>\n   make.names() |>\n   gsub(\"\\\\.+(\\\\.|$)\", \"\\\\1\", x=_)\n```\n:::\n\n\n\nTo estimate the number of sexual assault victimizations from the NCVS we selected all the crime labels that had \"rape\" or \"sex\" in them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataExt |>\n  filter(grepl(\"rape|[Ss]ex\", V4529)) |>\n  distinct(V4529)\n```\n:::\n\n\n\nAll of this will become clear in these notes.\n\n# Finding patterns in text with `grep()`\n\nFirst we will learn about `grep()`, which was first developed in the early 1970s. `grep()` searches data for lines that match a given expression. The name `grep` stands for \"globally search a regular expression and print.\" Some tangible examples will help us see how `grep()` works.\n\nRun the following line that provides a collection of text elements with a diverse range of capitalization, letters, punctuation, and other features. We will use this for practice and testing.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataText <- c(\"3718 Locust Walk\",\n              \"4 Privet Drive\",\n              \"10880 Malibu Point\",\n              \"221B Baker St.\",\n              \"19104-6286\",\n              \"20015\",\n              \"90291\",\n              \"90210\",\n              \"(215) 573-9097\",\n              \"215-573-9097\",\n              \"2155739097\",\n              \"Kendall Roy\",\n              \"Roman Roy\",\n              \"Siobhan Roy\",\n              \"Roy Wood, Jr.\",\n              \"Royal Caribbean\",\n              \"Casino Royale\",\n              \"two children\",\n              \"2 children\",\n              \"twins\",\n              \"Philadelphia\",\n              \"Philly\",\n              \"Phila\",\n              \"Dr. Phil\",\n              \"$23456\",\n              \"$10000\",\n              \"$60,000\")\n```\n:::\n\n\n\n\n## Find letters and numbers\n\nLet's find all of the items that have the letter \"a\" in `dataText`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"a\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1]  1  3  4 12 13 14 16 17 21 23\n```\n\n\n:::\n:::\n\n\n\nThis shows the indices of which elements of `dataText` have an \"a\" in them. Sure enough the first element, \"3718 Locust Walk\", has an \"a\" and you can confirm that the other indices `grep()` returned also indicate elements of `dataText` that have an \"a\".\n\nFor most of these notes we are going to set `value=TRUE`, which will return the actual elements matched rather than their indices. This will make it easier to check that `grep()` is finding the elements that we are expecting to match.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"a\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"10880 Malibu Point\" \"221B Baker St.\"    \n [4] \"Kendall Roy\"        \"Roman Roy\"          \"Siobhan Roy\"       \n [7] \"Royal Caribbean\"    \"Casino Royale\"      \"Philadelphia\"      \n[10] \"Phila\"             \n```\n\n\n:::\n:::\n\n\n\nAs you can see, `grep()` uses the following general syntax: grep(\"what we're searching for\", the text, and an optional `value=TRUE` if we want to return text). If we put `value=FALSE` (which is the default if we do not set `value`), we will just receive the index in the text where we can find what we are searching for.\n\nLet's try another example. Instead of a letter, let's try to find a number such as \"1\". Specifically, which items in `dataText` have a \"1\" in them?\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"1\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"10880 Malibu Point\" \"221B Baker St.\"    \n [4] \"19104-6286\"         \"20015\"              \"90291\"             \n [7] \"90210\"              \"(215) 573-9097\"     \"215-573-9097\"      \n[10] \"2155739097\"         \"$10000\"            \n```\n\n\n:::\n:::\n\n\n\n\nWe can also search for multiple characters, instead of individual characters. We place our list of desired characters within square brackets `[  ]`. For example, let's find items that contain numbers. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0123456789]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"2 children\"        \n[13] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\nIf we wanted items that contain an odd number, we could do this.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[13579]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"10880 Malibu Point\" \"221B Baker St.\"    \n [4] \"19104-6286\"         \"20015\"              \"90291\"             \n [7] \"90210\"              \"(215) 573-9097\"     \"215-573-9097\"      \n[10] \"2155739097\"         \"$23456\"             \"$10000\"            \n```\n\n\n:::\n:::\n\n\n\nSo the `[]` in a regular expression means \"match any of these characters.\" We can also place square brackets next to each other. For example, let's say we wanted to find an item in `dataText` that has four adjacent numbers.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9][0-9][0-9][0-9]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"10880 Malibu Point\" \"19104-6286\"        \n [4] \"20015\"              \"90291\"              \"90210\"             \n [7] \"(215) 573-9097\"     \"215-573-9097\"       \"2155739097\"        \n[10] \"$23456\"             \"$10000\"            \n```\n\n\n:::\n:::\n\n\n\nNote that we can use the shorthand `0-9` to mean any number between 0 and 9, including 0 and 9. This regular expression says \"find a number, followed by a number, followed by another number, followed by another number.\" Alternatively we can use `{4}` to mean \"match four of the previous character\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]{4}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"10880 Malibu Point\" \"19104-6286\"        \n [4] \"20015\"              \"90291\"              \"90210\"             \n [7] \"(215) 573-9097\"     \"215-573-9097\"       \"2155739097\"        \n[10] \"$23456\"             \"$10000\"            \n```\n\n\n:::\n:::\n\n\n\n`{n}` means the preceding item will be matched exactly n times. Note that this also matches text that has five or more numbers in a row, since if they have five numbers in a row, then they will also have four numbers in a row. Later we will learn about how to find exactly four numbers in a row.\n\nIt is not used often, but we can also use the squiggly brackets to make a range.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]{5,10}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"10880 Malibu Point\" \"19104-6286\"         \"20015\"             \n[4] \"90291\"              \"90210\"              \"2155739097\"        \n[7] \"$23456\"             \"$10000\"            \n```\n\n\n:::\n:::\n\n\n\n\nThus `{n,m}` will find something matched between n and m times. We have used examples above with numbers, but you can apply this syntax to letters.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[a-zA-Z]{5}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"Kendall Roy\"        \"Roman Roy\"         \n [7] \"Siobhan Roy\"        \"Royal Caribbean\"    \"Casino Royale\"     \n[10] \"two children\"       \"2 children\"         \"twins\"             \n[13] \"Philadelphia\"       \"Philly\"             \"Phila\"             \n```\n\n\n:::\n:::\n\n\n\nNote how we used the shorthand `a-z` to mean any lowercase letter and `A-Z` to mean any uppercase letter. `grep()` will match a different set of elements if we just search for lower case letters.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[a-z]{5}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"Kendall Roy\"        \"Siobhan Roy\"        \"Royal Caribbean\"   \n [7] \"Casino Royale\"      \"two children\"       \"2 children\"        \n[10] \"twins\"              \"Philadelphia\"       \"Philly\"            \n```\n\n\n:::\n:::\n\n\n\nSearches using `grep()` are case-sensitive. For example, let's find all items that contain capital letters.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[A-Z]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"Kendall Roy\"        \"Roman Roy\"         \n [7] \"Siobhan Roy\"        \"Roy Wood, Jr.\"      \"Royal Caribbean\"   \n[10] \"Casino Royale\"      \"Philadelphia\"       \"Philly\"            \n[13] \"Phila\"              \"Dr. Phil\"          \n```\n\n\n:::\n:::\n\n\n\n\n### Exercises\n1. Find text with vowels\n\n2. Find text with a number immediately followed by a letter\n\n3. What is the difference between `grep(\"Roy\", dataText, value=TRUE)` and `grep(\"[Roy]\", dataText, value=TRUE)`?\n\n\n## More symbols that help with grepping\nSo far you have seen that we use `[]` to match any character listed between the `[]`, the `-` to specify a range to match like `0-9`, `a-z`, and `A-Z`, and the `{}` to match the previous character multiple times.\n\nIn addition to these, there are several more symbols or sequences of symbols that are useful. The number of symbols on the keyboard are fairly limited compared to the numerous combinations of patterns of text we might wish to find. As a result you will see that some of these symbols are used in very different ways depending on the context.\n\n\n### Carets `^`\nLet's look at the caret `^` symbol. When we put a `^` within square brackets, it means \"not\". Let's try to find text in `dataText` that has something that is not a letter or a space immediately followed by a letter. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[^A-Za-z ][A-Za-z]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"221B Baker St.\"\n```\n\n\n:::\n:::\n\n\n\n\"221B Baker St.\" has a character that is not a letter (1) immediately followed by a letter (B).\n\nOutside of square brackets the `^` means something *completely* different. When we put the `^` outside of square bracket, it means \"the beginning of the text\". For example, the following regular expression matches text where the first character is either an upper-case or a lower-case letter.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"^[A-Za-z]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Kendall Roy\"     \"Roman Roy\"       \"Siobhan Roy\"     \"Roy Wood, Jr.\"  \n [5] \"Royal Caribbean\" \"Casino Royale\"   \"two children\"    \"twins\"          \n [9] \"Philadelphia\"    \"Philly\"          \"Phila\"           \"Dr. Phil\"       \n```\n\n\n:::\n:::\n\n\n\n\n### Dollar Signs `$`\nWhile we use carets to signal the beginning of the text, the dollar sign signals the end of the text. For example, to search for all items that end with either an upper-case or lower-case letter, we would do the following:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[A-Za-z]$\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"Kendall Roy\"        \"Roman Roy\"          \"Siobhan Roy\"       \n [7] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[10] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[13] \"Philly\"             \"Phila\"              \"Dr. Phil\"          \n```\n\n\n:::\n:::\n\n\n\nNote how all of these have a letter as the last character. We can be more specific and ask for text that end with the letter \"y\" or end with a 7.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"y$\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Kendall Roy\" \"Roman Roy\"   \"Siobhan Roy\" \"Philly\"     \n```\n\n\n:::\n\n```{.r .cell-code}\ngrep(\"7$\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"(215) 573-9097\" \"215-573-9097\"   \"2155739097\"    \n```\n\n\n:::\n:::\n\n\n\n\n### Plus Sign `+`\nThe `+` means \"at least one of the previous.\" For example, suppose we wanted to find items in our list that have numbers and those numbers are followed by letters.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]+[A-Za-z]+\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"221B Baker St.\"\n```\n\n\n:::\n:::\n\n\n\nOr search for text that starts with some numbers, then has a space, followed by some letters, and then ends.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"^[0-9]+ [A-Za-z]+$\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"2 children\"\n```\n\n\n:::\n:::\n\n\n\n\n### Exercises\n4. Find the Roy children. That is, pick out Kendall, Roman, and Siobhan Roy.\n\n5. Find text that starts with a number and ends with a letter. (Hint: You will probably need to use `^`, `$`, and `+`).\n\n\n### Parentheses `()`\nParentheses group together characters as words. For example, suppose we wanted to find the word \"two\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"(two)\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"two children\"\n```\n\n\n:::\n:::\n\n\n\nOn its own the parentheses are no different than just running the regular expression \"two\" with no parentheses. However, in combination with `|` and `?` it gets more interesting and powerful.\n\n### Vertical Bar `|`\nThe vertical bar functions as an \"or.\" Suppose we wanted to get both the phrases \"two children\" and \"2 children\", allowing the number to be spelled out or not. We would use parentheses as well as a vertical bar.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"(two|2) children\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"two children\" \"2 children\"  \n```\n\n\n:::\n:::\n\n\n\nLet's find all Los Angeles and Washington DC ZIP codes.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"(902|200)[0-9][0-9]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"20015\" \"90291\" \"90210\"\n```\n\n\n:::\n:::\n\n\n\n\nHere's how we can find words that have exactly four characters. To be exactly four characters, on either side of them there needs to be a space or the beginning or end of the line.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"( |^)[A-Za-z]{4}( |$)\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"3718 Locust Walk\" \"Dr. Phil\"        \n```\n\n\n:::\n:::\n\n\n\n`( |^)` says that we start with either a space or the beginning of the text. `( |$)` says that at the end there must be a space or the end of the text. In the middle there has to be exactly four letters. Note that this did not select \"Phil.\" since it has a period following it. We'll need a more general regular expression to select that one as well.\n\nLet's try to find phone numbers in `dataText`. The problem is that phone numbers have three different formats in our data. The easiest phone number pattern to find is the one with 10 digits in a row.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]{10}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"2155739097\"\n```\n\n\n:::\n:::\n\n\n\nIt is also not too hard to find the hyphenated phone number pattern.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]{3}-[0-9]{3}-[0-9]{4}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"215-573-9097\"\n```\n\n\n:::\n:::\n\n\n\n\nThe phone number format with parentheses needs a little more caution. We pointed out earlier that parentheses have special meaning in regular expressions. In fact, there are several \"special characters\" in regular expressions, `\\ ^ $ {} [] () . * + ? | -`. If you actually want to search for the symbol itself you need to \"protect\" it with a backslash `\\`. However, the `\\` is a special character for R too and R will think that something special is coming next after the `\\`. So to tell R \"no really, I really want a backslash here\" you have to protect the backslash too. So to look for those phone numbers with parentheses we use a regular expression like this.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"\\\\([0-9]{3}\\\\) [0-9]{3}-[0-9]{4}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"(215) 573-9097\"\n```\n\n\n:::\n:::\n\n\n\n\nNow, let's put all of these patterns together and use `|` to search for any phone number in any of the three formats.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]{10}|[0-9]{3}-[0-9]{3}-[0-9]{4}|\\\\([0-9]{3}\\\\) [0-9]{3}-[0-9]{4}\",\n     dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"(215) 573-9097\" \"215-573-9097\"   \"2155739097\"    \n```\n\n\n:::\n:::\n\n\n\n\n###  Question Mark `?`\nThe question mark indicates optional text. To illustrate, \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"Phil(adelphia)\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Philadelphia\"\n```\n\n\n:::\n\n```{.r .cell-code}\ngrep(\"Phil(adelphia)?\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Philadelphia\" \"Philly\"       \"Phila\"        \"Dr. Phil\"    \n```\n\n\n:::\n:::\n\n\n\nThe first one is no different from searching for the word \"Philadelphia,\" but the second one says that the \"adelphia\" part is optional. Note that this regular expression also picked up \"Dr. Phil\". Again we will need a more careful regular expression to avoid matching this name and only select abbreviations and nicknames for Philadelphia.\n\n### Boundaries `\\b` \n`\\b` will try to find boundaries around words. This includes spaces, punctuation, and the beginning and end of the text. So another way to find all text with four letter words, including \"Phil.\", is\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"\\\\b[A-Za-z]{4}\\\\b\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"3718 Locust Walk\" \"Roy Wood, Jr.\"    \"Dr. Phil\"        \n```\n\n\n:::\n:::\n\n\n\nRemember, the `\\` is a special character for R. To \"protect\" the backslash we put another backslash in front of it. If we did not include the `\\b` in this regular expression, then we would have also matched words with five or more letters too.\n\n\n### Exercises\nWrite regular expressions to find the following items in `dataText`.\n\n6. Find commas\n\n7. Find ZIP codes \n\n8. Find those with six letter word \n\n9. Find mentions of Philadelphia \n\n10. Find capitalized words \n\n11. Find the addresses \n\n12. Find a shorter way to get phone numbers using `?` \n\n\n\n# Finding and replacing patterns in text with `gsub()`\n`gsub()` stands for \"global substitution.\" It is useful for automating the editing of text, including deleting characters from text or extracting only parts of text. \n\n## Basic find and replace examples\nLet's remove all numbers from our `dataText` list.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"[0-9]\",\"\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \" Locust Walk\"    \" Privet Drive\"   \" Malibu Point\"   \"B Baker St.\"    \n [5] \"-\"               \"\"                \"\"                \"\"               \n [9] \"() -\"            \"--\"              \"\"                \"Kendall Roy\"    \n[13] \"Roman Roy\"       \"Siobhan Roy\"     \"Roy Wood, Jr.\"   \"Royal Caribbean\"\n[17] \"Casino Royale\"   \"two children\"    \" children\"       \"twins\"          \n[21] \"Philadelphia\"    \"Philly\"          \"Phila\"           \"Dr. Phil\"       \n[25] \"$\"               \"$\"               \"$,\"             \n```\n\n\n:::\n:::\n\n\n\nor remove all the Roy last names\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\" Roy$\",\"\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"Kendall\"           \n[13] \"Roman\"              \"Siobhan\"            \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\nor turn all punctuation to \"X\"\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"[.)($-]\",\"X\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker StX\"     \"19104X6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"X215X 573X9097\"    \n[10] \"215X573X9097\"       \"2155739097\"         \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, JrX\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"DrX Phil\"          \n[25] \"X23456\"             \"X10000\"             \"X60,000\"           \n```\n\n\n:::\n:::\n\n\n\nor remove HTML tags from text (very very handy!!!).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"<[^>]+>\", \"\", \n     \"<td><b><a href=\\\"/movie/Dont-Breathe-2-(2021)#tab=box-office\\\">Don't Breathe 2</a></b></td>\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Don't Breathe 2\"\n```\n\n\n:::\n:::\n\n\n\nThis last one we will use a lot. The regular expression says start with a `<`, then match several characters that are non `>`, followed by a `>`. Anything matching this pattern, like `<td>`, will get removed.\n\nThe first argument of the `gsub()` function is the \"find pattern,\" what we are asking `gsub()` to find. The second argument is a \"replacement pattern\" that will replace whatever `gsub()` matched with the find pattern. Lastly, like `grep()`, we need to tell `gsub()` the name of the data object in which it should look for the pattern.\n\nWith `gsub()` we will be using a lot of the same grammar, such as carats, brackets, and dashes, that we used with `grep()`. To illustrate, let's remove anything that is not a number from text.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"[^0-9]\",\"\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718\"       \"4\"          \"10880\"      \"221\"        \"191046286\" \n [6] \"20015\"      \"90291\"      \"90210\"      \"2155739097\" \"2155739097\"\n[11] \"2155739097\" \"\"           \"\"           \"\"           \"\"          \n[16] \"\"           \"\"           \"\"           \"2\"          \"\"          \n[21] \"\"           \"\"           \"\"           \"\"           \"23456\"     \n[26] \"10000\"      \"60000\"     \n```\n\n\n:::\n:::\n\n\n\n\n### Exercises\n13. Remove the all the commas. Note that we probably just want to remove them from the numbers, but we do not quite yet have the tools to avoid removing the comma from Roy Wood, Jr.\n\n\n## Back-Referencing\nA bit more complicated aspect of `gsub()` is \"backreferencing.\" Any part of the regular expression in the find pattern that is wrapped in parentheses gets stored in a \"register.\" You can have multiple pairs of parentheses and, therefore, save different parts of what gets matched in the find pattern. You can then recall what `gsub()` stored in the registers in the replacement pattern, using `\\\\1` for what was stored in the first register, `\\\\2` for what was stored in the second register, and so on.\n\nFor example, let's delete the \"plus four\" part of the ZIP codes in our data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"([0-9]{5})-[0-9]{4}\",\"\\\\1\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104\"              \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\nWe wrapped the parentheses around the first five digits, so only those first five digits get stored in register 1. Then the replacement pattern replaces everything that the find pattern matched (the entirety of the five digits, the hyphen, and the plus four digits) with the contents of register 1, containing just the first five digits.\n\nLet's use `gsub()` to just keep the first two \"words\" in each element of `dataText`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"^([^ ]+ [^ ]+) .*$\", \"\\\\1\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust\"     \"4 Privet\"        \"10880 Malibu\"    \"221B Baker\"     \n [5] \"19104-6286\"      \"20015\"           \"90291\"           \"90210\"          \n [9] \"(215) 573-9097\"  \"215-573-9097\"    \"2155739097\"      \"Kendall Roy\"    \n[13] \"Roman Roy\"       \"Siobhan Roy\"     \"Roy Wood,\"       \"Royal Caribbean\"\n[17] \"Casino Royale\"   \"two children\"    \"2 children\"      \"twins\"          \n[21] \"Philadelphia\"    \"Philly\"          \"Phila\"           \"Dr. Phil\"       \n[25] \"$23456\"          \"$10000\"          \"$60,000\"        \n```\n\n\n:::\n:::\n\n\n\nThis regular expression says: start at the beginning of the text, find a bunch of characters that are not spaces (remember that the `+` means one or more of the previous), then find a space, then find another bunch of characters that are not spaces, followed by another space, followed by anything else until the end of the text. The `.` is a wild card that matches any one character. The `*` is like the `+` but it means *zero* or more of the previous character (the `+` matches *one* or more of the previous character). Note how we have used the parentheses. They are wrapped around those first two words. Those words get stored in register 1 and the replacement pattern just recalls whatever got stored in register 1.\n\nAn alternative strategy is to use `\\w`, which means a \"word character\" (any numbers of letters) and `\\s`, which means any \"whitespace character\" (spaces, tabs, line feeds, non-breaking space).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"^(\\\\w+\\\\s\\\\w+)\\\\s.*$\",\"\\\\1\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust\"     \"4 Privet\"        \"10880 Malibu\"    \"221B Baker\"     \n [5] \"19104-6286\"      \"20015\"           \"90291\"           \"90210\"          \n [9] \"(215) 573-9097\"  \"215-573-9097\"    \"2155739097\"      \"Kendall Roy\"    \n[13] \"Roman Roy\"       \"Siobhan Roy\"     \"Roy Wood, Jr.\"   \"Royal Caribbean\"\n[17] \"Casino Royale\"   \"two children\"    \"2 children\"      \"twins\"          \n[21] \"Philadelphia\"    \"Philly\"          \"Phila\"           \"Dr. Phil\"       \n[25] \"$23456\"          \"$10000\"          \"$60,000\"        \n```\n\n\n:::\n:::\n\n\n\nWhen working with `grep()`, we wrote a regular expression to find all the phone numbers in all the various formats. Now let's use `gsub()` to standardize all the phone numbers to have the hyphenated format, like 123-456-7890. We use the same regular expression you figured out in the exercises when using `?` in `grep()` to find phone numbers, but we insert pairs of parentheses to capture the phone number digits.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"^\\\\(?([0-9]{3})(\\\\) |-)?([0-9]{3})-?([0-9]{4})\",\"\\\\1-\\\\3-\\\\4\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"215-573-9097\"      \n[10] \"215-573-9097\"       \"215-573-9097\"       \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\nNote that register 2 captures whatever text matches the optional text `(\\\\) |-)`. That's why you don't see `\\\\2` in the replacement pattern.\n\n### Exercise\n14. Add commas to these numbers `c(\"9453\",\"2332\",\"4645\",\"1234\")`. That is, make these numbers look like 9,453 and 2,332 and so on. Fill in the find pattern and replacement pattern in `gsub(\"\", \"\", c(\"9453\",\"2332\",\"4645\",\"1234\"))`\n   \n## Lookaheads\nAlthough not as commonly used as a backreference, a \"lookahead\" can be helpful to find what comes next or, more generally, to `gsub()` items that are a bit more complicated.  Let's say you wanted to check that every q is followed by a u. If it's not, then insert the u after the q.\n\nMaybe you would do something like this\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"q[^u]\",\"qu\",c(\"quiet\",\"quick\",\"quagmire\",\"qixotic\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"quiet\"    \"quick\"    \"quagmire\" \"quxotic\" \n```\n\n\n:::\n:::\n\n\n\nAs you can see, it doesn't quite do what we wanted. It problematically drops the \"i\" from \"quixotic.\" Remember that the replacement pattern will overwrite whatever matches the find pattern. This find pattern will match the \"qi,\" the q *and* the adjacent character that is not a u.\n\nA \"lookahead\" just peeks at the next character to see what it is, but does not consider it part of the match. In parentheses we signal a lookahead with `?` and then to ask for a character that is not a \"u\" we use `!u`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"q(?!u)\", \"qu\", c(\"quiet\",\"quick\",\"quagmire\",\"qixotic\"), perl=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"quiet\"    \"quick\"    \"quagmire\" \"quixotic\"\n```\n\n\n:::\n:::\n\n\n\nNow we have \"quixotic\" spelled properly as `gsub()` looked ahead to check for a \"u\" but did not consider it part of the match to be replaced. Note that we have set `perl=TRUE`. There is not a single regular expression standard. Lookaheads (and there are lookbehinds too) are not part of the POSIX 1003.2 standard that R uses by default. However, you can ask R to use perl-style regular expressions that do support lookaheads (and lookbehinds) by simply setting `perl=TRUE`.\n\nLet's say we want to add commas to large numbers to display like 1,234,567 instead of 1234567. Ready for this one?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"(?<!\\\\.)([0-9])(?=([0-9]{3})+($|\\\\.))\", \"\\\\1,\",\n     c(\"$1234567890\",\"234\",\"1234\",\"12345\",\"12345.6789\"),\n     perl=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"$1,234,567,890\" \"234\"            \"1,234\"          \"12,345\"        \n[5] \"12,345.6789\"   \n```\n\n\n:::\n:::\n\n\n\nFirst note the replacement text, `\\\\1,`. This is going to take whatever is in register 1 and produce it again followed by a `,`. The challenge for the matching part is to write a regular expression that identifies those digits where a comma is needed to its right. There are three parts to the regular expression.\n\n-  `(?<!\\\\.)`: This is a \"lookbehind\" that first makes sure there are no decimals to the left of the digit\n-  `([0-9])`: Match a single digit and store it in register 1\n-  `(?=([0-9]{3})+($|\\\\.))`: This is a \"lookahead\" checking that there are blocks of 3 digits to the right until either the end or a decimal\n\nThis gets you a handy regular expression to produce nicer looking numbers. Just so you know, R also provides some handy tools for formatting numbers.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprettyNum(c(1234567890,234,1234,12345,12345.6789), big.mark=\",\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"1,234,567,890\" \"234\"           \"1,234\"         \"12,345\"       \n[5] \"12,345.68\"    \n```\n\n\n:::\n:::\n\n\n\n\nHere's how lookaheads are going to be very important for us in working with data. We often get datasets in comma-separated value format, typically with a \".csv\" extension on the file name. The R function `read.csv()` can read in data in this format. Problems can occur when values in the dataset have commas inside of them.\n\nHere's some example text that could be problematic.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntext.w.quotes <- 'white,male,\"loitering,narcotics\",19,\"knife,gun\"'\ncat(text.w.quotes,\"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nwhite,male,\"loitering,narcotics\",19,\"knife,gun\" \n```\n\n\n:::\n:::\n\n\n\nSome of the commas in this text are separating values for race, sex, arrest charge, age, and recovered contraband. However, there are other commas inside the quotes listing the arrest charges and the contraband items. Fortunately, `read.csv()` is smart enough to keep quoted items together as one data element, as long as the parameter `quote = \"\\\"'\"`, which is the default. Other functions are not so kind. Later we will use `dbWriteTable()` to build an SQL database and it will think that all the commas separate the values. So it will think there is a separate `\"loitering` data element and then a `narcotics`. And the same for `\"knife` and `gun\"`.\n\nSo here is a very handy regular expression using lookaheads that changes commas that are not inside quotes to semicolons. You can also choose a stranger symbol, like | or @. This regular expression looks for a `,` and then it uses a lookahead for the reminder of the line. It will match that comma is there are no quotes for the rest of the line, `[^\\\"]`, or if there are only pairs of quotes each with non-quote characters inside of them, `\\\"[^\\\"]*\\\"`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\",(?=([^\\\"]|\\\"[^\\\"]*\\\")*$)\",\";\",text.w.quotes,perl=TRUE) |>\n   cat()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nwhite;male;\"loitering,narcotics\";19;\"knife,gun\"\n```\n\n\n:::\n:::\n\n\n\nAs you can see, commas inside the quotes are preserved and those outside have been transformed into `;`. Now we would be able to tell a function like `dbWriteTable()` that the data elements are separated by `;` and it will read in the data properly.\n\n### Exercises\nMake the following changes to `dataText`.\n\n15. Change Dr. Phil to Dr. Phillip\n\n16. Spell out Philadelphia\n\n17. Keep just the first word or first number\n\n18. Keep only area codes of phone numbers\n\n\n# Introduction to Webscraping: A Practical Application of Regular Expressions\n\nAs you have already seen, regular expressions are an extremely valuable tool when working with data. In fact, we are going to learn about webscraping next. Webscraping enables us to extract data from a website by searching the underlying HTML code for the website and extracting the desired data. To do webscraping, you are going to rely heavily on regular expressions.\n\n## The 10,000 most common English words\n\nSuppose we want a list of the 10,000 most common words in English. [wiktionary.org](https://en.wiktionary.org/wiki/Wiktionary:Frequency_lists/PG/2006/04/1-10000) provides this list. Have a look at the webpage.\n\nThe `scan()` function in R can read data from a text file, but if given a URL, it will download the HTML code for that page.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords <- scan(\"https://en.wiktionary.org/wiki/Wiktionary:Frequency_lists/PG/2006/04/1-10000\",\n          what=\"\",sep=\"\\n\")\n```\n:::\n\n\n\nIf instead you got a message like \"Read 50706 items\" then you are in luck. You just used R to scrape a webpage. You might get a number different from 50706 and it might change if you run the script another day. Websites make updates to headers, footers, and banners and these alterations change the number of lines of HTML code required to generate the page.\n\nThe first several lines of HTML code in `words` all contain HTML code to set up the page.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords[1:5]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"<!DOCTYPE html>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \n[2] \"<html class=\\\"client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-1 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-sticky-header-enabled vector-toc-available\\\" lang=\\\"en\\\" dir=\\\"ltr\\\">\"\n[3] \"<head>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       \n[4] \"<meta charset=\\\"UTF-8\\\">\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n[5] \"<title>Wiktionary:Frequency lists/PG/2006/04/1-10000 - Wiktionary, the free dictionary</title>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n```\n\n\n:::\n:::\n\n\n\nThere is nothing of interest to us here. We just want the part with the 10,000 most common words. Let's look further down the page.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords[490+0:9]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"</td></tr>\"                                          \n [2] \"<tr>\"                                                \n [3] \"<td>1</td>\"                                          \n [4] \"<td><a href=\\\"/wiki/the\\\" title=\\\"the\\\">the</a></td>\"\n [5] \"<td>56271872\"                                        \n [6] \"</td></tr>\"                                          \n [7] \"<tr>\"                                                \n [8] \"<td>2</td>\"                                          \n [9] \"<td><a href=\\\"/wiki/of\\\" title=\\\"of\\\">of</a></td>\"   \n[10] \"<td>33950064\"                                        \n```\n\n\n:::\n:::\n\n\n\nHere we start finding some words! Note that every line that has one of the words we are looking for has `title=\\\"`. We can use that phrase to find lines that have the 10,000 words on them. Use `grep()` to find those lines and print out the first 10 of them to see if this will work for us.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords <- grep(\"title=\\\"\", words, value=TRUE)\nwords[23:30]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"\\t\\t\\t\\t\\t<div id=\\\"contentSub\\\"><div id=\\\"mw-content-subtitle\\\"><div class=\\\"subpages\\\">&lt; <bdi dir=\\\"ltr\\\"><a href=\\\"/wiki/Wiktionary:Frequency_lists\\\" title=\\\"Wiktionary:Frequency lists\\\">Wiktionary:Frequency lists</a></bdi></div></div></div>\"                                                                                                                                                                                                                                                                                                                                                                                                                   \n[2] \"\\t\\t\\t\\t\\t<div id=\\\"mw-content-text\\\" class=\\\"mw-body-content\\\"><div class=\\\"mw-content-ltr mw-parser-output\\\" lang=\\\"en\\\" dir=\\\"ltr\\\"><div class=\\\"mw-heading mw-heading3\\\"><h3 id=\\\"1_-_10000\\\" data-mw-thread-id=\\\"h-1_-_10000\\\"><span data-mw-comment-start=\\\"\\\" id=\\\"h-1_-_10000\\\"></span>1 - 10000<span data-mw-comment-end=\\\"h-1_-_10000\\\"></span></h3><span class=\\\"mw-editsection\\\"><span class=\\\"mw-editsection-bracket\\\">[</span><a href=\\\"/w/index.php?title=Wiktionary:Frequency_lists/PG/2006/04/1-10000&amp;action=edit&amp;section=1\\\" title=\\\"Edit section: 1 - 10000\\\"><span>edit</span></a><span class=\\\"mw-editsection-bracket\\\">]</span></span></div>\"\n[3] \"<td><a href=\\\"/wiki/the\\\" title=\\\"the\\\">the</a></td>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \n[4] \"<td><a href=\\\"/wiki/of\\\" title=\\\"of\\\">of</a></td>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n[5] \"<td><a href=\\\"/wiki/and\\\" title=\\\"and\\\">and</a></td>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \n[6] \"<td><a href=\\\"/wiki/to\\\" title=\\\"to\\\">to</a></td>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n[7] \"<td><a href=\\\"/wiki/in\\\" title=\\\"in\\\">in</a></td>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n[8] \"<td><a href=\\\"/wiki/i\\\" title=\\\"i\\\">i</a></td>\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \n```\n\n\n:::\n:::\n\n\n\nWhile the first 24 lines do have the phrase `title=\\\"`, they are not the ones with the 10,000 words. But starting at line 25 we start seeing the most common words: the, of, and, to. So let's cut the first 24 lines from `words` and keep the next 10,000 lines. `title=\\\"` shows up more in the HTML code in the footer after the 10,000th word.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords <- words[-(1:24)]\nwords <- words[1:10000]\nhead(words) # look at the first several rows\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"<td><a href=\\\"/wiki/the\\\" title=\\\"the\\\">the</a></td>\"\n[2] \"<td><a href=\\\"/wiki/of\\\" title=\\\"of\\\">of</a></td>\"   \n[3] \"<td><a href=\\\"/wiki/and\\\" title=\\\"and\\\">and</a></td>\"\n[4] \"<td><a href=\\\"/wiki/to\\\" title=\\\"to\\\">to</a></td>\"   \n[5] \"<td><a href=\\\"/wiki/in\\\" title=\\\"in\\\">in</a></td>\"   \n[6] \"<td><a href=\\\"/wiki/i\\\" title=\\\"i\\\">i</a></td>\"      \n```\n\n\n:::\n\n```{.r .cell-code}\ntail(words) # look at the last several rows\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"<td><a href=\\\"/wiki/film\\\" title=\\\"film\\\">film</a></td>\"                     \n[2] \"<td><a href=\\\"/wiki/repressed\\\" title=\\\"repressed\\\">repressed</a></td>\"      \n[3] \"<td><a href=\\\"/wiki/cooperation\\\" title=\\\"cooperation\\\">cooperation</a></td>\"\n[4] \"<td><a href=\\\"/wiki/sequel\\\" title=\\\"sequel\\\">sequel</a></td>\"               \n[5] \"<td><a href=\\\"/wiki/wench\\\" title=\\\"wench\\\">wench</a></td>\"                  \n[6] \"<td><a href=\\\"/wiki/calves\\\" title=\\\"calves\\\">calves</a></td>\"               \n```\n\n\n:::\n:::\n\n\n\nThese lines have the text we need, but there are still a lot of HTML tags, all that HTML code wrapped in `< >`. `<td>` is the HTML tag marking a cell in a table and `<a>` is the HTML tag for creating hyperlinks to other pages. Each of these also has ending tags `</td>` and `</a>`. Fortunately for us they are all contained within the `<` and `>` characters. So let's use `gsub()` to remove all the HTML tags.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords <- gsub(\"<[^>]*>\",\"\",words)\n```\n:::\n\n\n\nThis regular expression looks for a `<`, then a bunch of characters that are not a `>`, followed by a `>` and replaces them with nothing. Now `words` contains just our list of 10,000 most common words. Here are the first 50 of them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwords[1:50]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"the\"   \"of\"    \"and\"   \"to\"    \"in\"    \"i\"     \"that\"  \"was\"   \"his\"  \n[10] \"he\"    \"it\"    \"with\"  \"is\"    \"for\"   \"as\"    \"had\"   \"you\"   \"not\"  \n[19] \"be\"    \"her\"   \"on\"    \"at\"    \"by\"    \"which\" \"have\"  \"or\"    \"from\" \n[28] \"this\"  \"him\"   \"but\"   \"all\"   \"she\"   \"they\"  \"were\"  \"my\"    \"are\"  \n[37] \"me\"    \"one\"   \"their\" \"so\"    \"an\"    \"said\"  \"them\"  \"we\"    \"who\"  \n[46] \"would\" \"been\"  \"will\"  \"no\"    \"when\" \n```\n\n\n:::\n:::\n\n\n\n\n### Exercises\n\n19. We were told \"i before e except after c, or when sounded like a as in neighbor or weigh\". Is that true?\n\n20. Find words with punctuation\n\n21. Find words that do not have aeiou in the first four characters\n\n# Solutions to the exercises \n1. Find text with vowels\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[AEIOUaeiou]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"Kendall Roy\"        \"Roman Roy\"         \n [7] \"Siobhan Roy\"        \"Roy Wood, Jr.\"      \"Royal Caribbean\"   \n[10] \"Casino Royale\"      \"two children\"       \"2 children\"        \n[13] \"twins\"              \"Philadelphia\"       \"Philly\"            \n[16] \"Phila\"              \"Dr. Phil\"          \n```\n\n\n:::\n:::\n\n\n\n\n2. Find text with a number immediately followed by a letter\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9][A-z]\", dataText,value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"221B Baker St.\"\n```\n\n\n:::\n:::\n\n\n\n\n3. What is the difference between `grep(\"Roy\", dataText, value=TRUE)` and `grep(\"[Roy]\", dataText, value=TRUE)`?\n`Roy` will only match text that is exactly \"Roy\", while `[Roy]` will match text that has any one of the characters \"R\", \"o\", or \"y\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"Roy\", dataText,value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Kendall Roy\"     \"Roman Roy\"       \"Siobhan Roy\"     \"Roy Wood, Jr.\"  \n[5] \"Royal Caribbean\" \"Casino Royale\"  \n```\n\n\n:::\n\n```{.r .cell-code}\ngrep(\"[Roy]\", dataText,value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"10880 Malibu Point\" \"Kendall Roy\"       \n [4] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n [7] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[10] \"Philly\"            \n```\n\n\n:::\n:::\n\n\n\n\n\n4. Find the Roy children\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"Roy$\", dataText, value = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Kendall Roy\" \"Roman Roy\"   \"Siobhan Roy\"\n```\n\n\n:::\n:::\n\n\n\n\n5. Find text that starts with a number and ends with a letter\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"^[0-9][0-z ]+[A-z]$\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n[4] \"2 children\"        \n```\n\n\n:::\n:::\n\n\n\n\n\n6. Find commas\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\",\", dataText,value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Roy Wood, Jr.\" \"$60,000\"      \n```\n\n\n:::\n:::\n\n\n\nRemember that not every regular expression is complicated. Sometimes you just need to search for something specific and it requires no fancy regular expression.\n\n7. Find ZIP codes\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"^[0-9]{5}$|^[0-9]{5}-\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"19104-6286\" \"20015\"      \"90291\"      \"90210\"     \n```\n\n\n:::\n:::\n\n\n\n\n8. Find those with six letter word\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"\\\\b[A-Za-z]{6}\\\\b\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n[4] \"Casino Royale\"      \"Philly\"            \n```\n\n\n:::\n:::\n\n\n\n\n9. Find mentions of Philadelphia\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"Phil(adelphia|ly|a)\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Philadelphia\" \"Philly\"       \"Phila\"       \n```\n\n\n:::\n:::\n\n\n\nor\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# \"Phil\" followed by something that is not whitespace\ngrep(\"Phil[^\\\\s]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Philadelphia\" \"Philly\"       \"Phila\"       \n```\n\n\n:::\n:::\n\n\n\n\n10. Find capitalized words\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"\\\\b[A-Z]\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"Kendall Roy\"        \"Roman Roy\"         \n [7] \"Siobhan Roy\"        \"Roy Wood, Jr.\"      \"Royal Caribbean\"   \n[10] \"Casino Royale\"      \"Philadelphia\"       \"Philly\"            \n[13] \"Phila\"              \"Dr. Phil\"          \n```\n\n\n:::\n:::\n\n\n\n\n11. Find the addresses\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[0-9]+[A-Z]? [A-Za-z ]+ (Drive|Walk|Point|St)\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n[4] \"221B Baker St.\"    \n```\n\n\n:::\n:::\n\n\n\n\n12. Find a shorter way to get phone numbers using `?`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"\\\\(?[0-9]{3}(\\\\) |-| )?[0-9]{3}(-| )?[0-9]{4}\", dataText, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"(215) 573-9097\" \"215-573-9097\"   \"2155739097\"    \n```\n\n\n:::\n:::\n\n\n\n\n13. Remove the all the commas\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\",\", \"\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood Jr.\"      \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60000\"            \n```\n\n\n:::\n:::\n\n\n\n\n14. Add commas to these numbers `c(\"9453\",\"2332\",\"4645\",\"1234\")`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"([0-9])([0-9]{3})\", \"\\\\1,\\\\2\", c(\"9453\",\"2332\",\"4645\",\"1234\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"9,453\" \"2,332\" \"4,645\" \"1,234\"\n```\n\n\n:::\n:::\n\n\n\nor\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"^([0-9])\", \"\\\\1,\", c(\"9453\",\"2332\",\"4645\",\"1234\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"9,453\" \"2,332\" \"4,645\" \"1,234\"\n```\n\n\n:::\n:::\n\n\n\n\n15. Change Dr. Phil to Dr. Phillip\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"Phil$\",\"Phillip\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"Dr. Phillip\"       \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\n\n16. Spell out Philadelphia\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub((\"Phil(adelphia|ly|a)\"), \"Philadelphia\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philadelphia\"       \"Philadelphia\"       \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\nor\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"Phil[^\\\\b]+\", \"Philadelphia\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"(215) 573-9097\"    \n[10] \"215-573-9097\"       \"2155739097\"         \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philadelphia\"       \"Philadelphia\"       \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\n\n17. Keep just the first word or first number\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"^([^ ]+) .*$\", \"\\\\1\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718\"         \"4\"            \"10880\"        \"221B\"         \"19104-6286\"  \n [6] \"20015\"        \"90291\"        \"90210\"        \"(215)\"        \"215-573-9097\"\n[11] \"2155739097\"   \"Kendall\"      \"Roman\"        \"Siobhan\"      \"Roy\"         \n[16] \"Royal\"        \"Casino\"       \"two\"          \"2\"            \"twins\"       \n[21] \"Philadelphia\" \"Philly\"       \"Phila\"        \"Dr.\"          \"$23456\"      \n[26] \"$10000\"       \"$60,000\"     \n```\n\n\n:::\n:::\n\n\n\nor\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\" .*\", \"\", dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718\"         \"4\"            \"10880\"        \"221B\"         \"19104-6286\"  \n [6] \"20015\"        \"90291\"        \"90210\"        \"(215)\"        \"215-573-9097\"\n[11] \"2155739097\"   \"Kendall\"      \"Roman\"        \"Siobhan\"      \"Roy\"         \n[16] \"Royal\"        \"Casino\"       \"two\"          \"2\"            \"twins\"       \n[21] \"Philadelphia\" \"Philly\"       \"Phila\"        \"Dr.\"          \"$23456\"      \n[26] \"$10000\"       \"$60,000\"     \n```\n\n\n:::\n:::\n\n\n\n\n18. Keep only area codes of phone numbers\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngsub(\"^\\\\(?([0-9]{3})(\\\\) |-| )?[0-9]{3}-?[0-9]{4}\",\"\\\\1\",dataText)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"3718 Locust Walk\"   \"4 Privet Drive\"     \"10880 Malibu Point\"\n [4] \"221B Baker St.\"     \"19104-6286\"         \"20015\"             \n [7] \"90291\"              \"90210\"              \"215\"               \n[10] \"215\"                \"215\"                \"Kendall Roy\"       \n[13] \"Roman Roy\"          \"Siobhan Roy\"        \"Roy Wood, Jr.\"     \n[16] \"Royal Caribbean\"    \"Casino Royale\"      \"two children\"      \n[19] \"2 children\"         \"twins\"              \"Philadelphia\"      \n[22] \"Philly\"             \"Phila\"              \"Dr. Phil\"          \n[25] \"$23456\"             \"$10000\"             \"$60,000\"           \n```\n\n\n:::\n:::\n\n\n\n\n19. We were told \"i before e except after c, or when sounded like a as in neighbor or weigh\". Is that true?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[^c]ei\", words, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"their\"        \"being\"        \"neither\"      \"seeing\"       \"foreign\"     \n [6] \"weight\"       \"seized\"       \"height\"       \"reign\"        \"sovereign\"   \n[11] \"beings\"       \"wherein\"      \"veil\"         \"therein\"      \"leisure\"     \n[16] \"seize\"        \"neighborhood\" \"heir\"         \"theirs\"       \"neighbors\"   \n[21] \"veins\"        \"heights\"      \"neighbour\"    \"neighbouring\" \"weighed\"     \n[26] \"neighbor\"     \"reigned\"      \"sovereignty\"  \"foreigners\"   \"neighboring\" \n[31] \"reins\"        \"seizing\"      \"weigh\"        \"vein\"         \"Keith\"       \n[36] \"sovereigns\"   \"leisurely\"    \"foreigner\"    \"weird\"        \"deity\"       \n[41] \"weighing\"     \"freight\"      \"deities\"      \"rein\"         \"reigns\"      \n[46] \"weighty\"      \"Raleigh\"      \"albeit\"       \"heightened\"   \"Seine\"       \n[51] \"well-being\"   \"forfeit\"      \"Marseilles\"   \"twenty-eight\" \"herein\"      \n```\n\n\n:::\n\n```{.r .cell-code}\ngrep(\"cie\", words, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"ancient\"       \"society\"       \"sufficient\"    \"species\"      \n [5] \"science\"       \"conscience\"    \"sufficiently\"  \"scientific\"   \n [9] \"fancied\"       \"fancies\"       \"efficient\"     \"efficiency\"   \n[13] \"tendencies\"    \"conscientious\" \"insufficient\"  \"deficient\"    \n[17] \"deficiency\"   \n```\n\n\n:::\n:::\n\n\n\nThere are a lot of words with \"ei\" where the letter before the \"ei\"\" is not a \"c\". Also, there are a lot of words that have \"ie\" immediately following a \"c\".\n\n20. Find words with punctuation\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[^a-zA-Z0-9]\", words, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  [1] \"I'll\"           \"can't\"          \"I've\"           \"didn't\"        \n  [5] \"an'\"            \"won't\"          \"man's\"          \"c.\"            \n  [9] \"that's\"         \"etc.\"           \"o'\"             \"I'd\"           \n [13] \"v.\"             \"father's\"       \"wouldn't\"       \"he's\"          \n [17] \"couldn't\"       \"isn't\"          \"'em\"            \"king's\"        \n [21] \"there's\"        \"ain't\"          \"you'll\"         \"god's\"         \n [25] \"mother+'s\"      \"wasn't\"         \"doesn't\"        \"haven't\"       \n [29] \"you've\"         \"woman's\"        \"we'll\"          \"she's\"         \n [33] \"'tis\"           \"you'd\"          \"what's\"         \"cf.\"           \n [37] \"hadn't\"         \"th'\"            \"pp.\"            \"rest.\"         \n [41] \"o'er\"           \"u.s.\"           \"he'd\"           \"they're\"       \n [45] \"we're\"          \"day's\"          \"girl's\"         \"he'll\"         \n [49] \"shouldn't\"      \"husband's\"      \"twenty-five\"    \"men's\"         \n [53] \"other's\"        \"i.e.\"           \"brother's\"      \"wife's\"        \n [57] \"we've\"          \"well-known\"     \"lady's\"         \"twenty-four\"   \n [61] \"ma'am\"          \"enemy's\"        \"imp.\"           \"hasn't\"        \n [65] \"majesty's\"      \"viz.\"           \"mustn't\"        \"old-fashioned\" \n [69] \"friend's\"       \"so-called\"      \"re-use\"         \"aren't\"        \n [73] \"they'll\"        \"needn't\"        \"pub.\"           \"middle-aged\"   \n [77] \"she'd\"          \"t'\"             \"of.\"            \"oe.\"           \n [81] \"prof.\"          \"she'll\"         \"shan't\"         \"ne'er\"         \n [85] \"as.\"            \"they'd\"         \"we'd\"           \"here's\"        \n [89] \"they've\"        \"adj.\"           \"weren't\"        \"sq.\"           \n [93] \"gen.\"           \"cong.\"          \"col.\"           \"brother-in-law\"\n [97] \"son-in-law\"     \"e.g.\"           \"ch.\"            \"e-mail\"        \n[101] \"twenty-one\"     \"twenty-two\"     \"it'll\"          \"ft.\"           \n[105] \"self-control\"   \"anglo-saxon\"    \"ff.\"            \"forty-five\"    \n[109] \"'ll\"            \"Icel.\"          \"good-looking\"   \"p.m.\"          \n[113] \"e'er\"           \"twenty-three\"   \"thirty-six\"     \"a.m.\"          \n[117] \"father-in-law\"  \"e'en\"           \"seventy-five\"   \"'cause\"        \n[121] \"well-being\"     \"Mass.\"          \"thirty-two\"     \"self-\"         \n[125] \"twenty-eight\"   \"twenty-six\"     \"sister-in-law\"  \"three-quarters\"\n[129] \"'n'\"           \n```\n\n\n:::\n:::\n\n\n\nor\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"[[:punct:]]\", words, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  [1] \"I'll\"           \"can't\"          \"I've\"           \"didn't\"        \n  [5] \"an'\"            \"won't\"          \"man's\"          \"c.\"            \n  [9] \"that's\"         \"etc.\"           \"o'\"             \"I'd\"           \n [13] \"v.\"             \"father's\"       \"wouldn't\"       \"he's\"          \n [17] \"couldn't\"       \"isn't\"          \"'em\"            \"king's\"        \n [21] \"there's\"        \"ain't\"          \"you'll\"         \"god's\"         \n [25] \"mother+'s\"      \"wasn't\"         \"doesn't\"        \"haven't\"       \n [29] \"you've\"         \"woman's\"        \"we'll\"          \"she's\"         \n [33] \"'tis\"           \"you'd\"          \"what's\"         \"cf.\"           \n [37] \"hadn't\"         \"th'\"            \"pp.\"            \"rest.\"         \n [41] \"o'er\"           \"u.s.\"           \"he'd\"           \"they're\"       \n [45] \"we're\"          \"day's\"          \"girl's\"         \"he'll\"         \n [49] \"shouldn't\"      \"husband's\"      \"twenty-five\"    \"men's\"         \n [53] \"other's\"        \"i.e.\"           \"brother's\"      \"wife's\"        \n [57] \"we've\"          \"well-known\"     \"lady's\"         \"twenty-four\"   \n [61] \"ma'am\"          \"enemy's\"        \"imp.\"           \"hasn't\"        \n [65] \"majesty's\"      \"viz.\"           \"mustn't\"        \"old-fashioned\" \n [69] \"friend's\"       \"so-called\"      \"re-use\"         \"aren't\"        \n [73] \"they'll\"        \"needn't\"        \"pub.\"           \"middle-aged\"   \n [77] \"she'd\"          \"t'\"             \"of.\"            \"oe.\"           \n [81] \"prof.\"          \"she'll\"         \"shan't\"         \"ne'er\"         \n [85] \"as.\"            \"they'd\"         \"we'd\"           \"here's\"        \n [89] \"they've\"        \"adj.\"           \"weren't\"        \"sq.\"           \n [93] \"gen.\"           \"cong.\"          \"col.\"           \"brother-in-law\"\n [97] \"son-in-law\"     \"e.g.\"           \"ch.\"            \"e-mail\"        \n[101] \"twenty-one\"     \"twenty-two\"     \"it'll\"          \"ft.\"           \n[105] \"self-control\"   \"anglo-saxon\"    \"ff.\"            \"forty-five\"    \n[109] \"'ll\"            \"Icel.\"          \"good-looking\"   \"p.m.\"          \n[113] \"e'er\"           \"twenty-three\"   \"thirty-six\"     \"a.m.\"          \n[117] \"father-in-law\"  \"e'en\"           \"seventy-five\"   \"'cause\"        \n[121] \"well-being\"     \"Mass.\"          \"thirty-two\"     \"self-\"         \n[125] \"twenty-eight\"   \"twenty-six\"     \"sister-in-law\"  \"three-quarters\"\n[129] \"'n'\"           \n```\n\n\n:::\n:::\n\n\n\n`[:punct:]` is a special set containing all punctuation characters.\nor\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"\\\\W\", words, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  [1] \"I'll\"           \"can't\"          \"I've\"           \"didn't\"        \n  [5] \"an'\"            \"won't\"          \"man's\"          \"c.\"            \n  [9] \"that's\"         \"etc.\"           \"o'\"             \"I'd\"           \n [13] \"v.\"             \"father's\"       \"wouldn't\"       \"he's\"          \n [17] \"couldn't\"       \"isn't\"          \"'em\"            \"king's\"        \n [21] \"there's\"        \"ain't\"          \"you'll\"         \"god's\"         \n [25] \"mother+'s\"      \"wasn't\"         \"doesn't\"        \"haven't\"       \n [29] \"you've\"         \"woman's\"        \"we'll\"          \"she's\"         \n [33] \"'tis\"           \"you'd\"          \"what's\"         \"cf.\"           \n [37] \"hadn't\"         \"th'\"            \"pp.\"            \"rest.\"         \n [41] \"o'er\"           \"u.s.\"           \"he'd\"           \"they're\"       \n [45] \"we're\"          \"day's\"          \"girl's\"         \"he'll\"         \n [49] \"shouldn't\"      \"husband's\"      \"twenty-five\"    \"men's\"         \n [53] \"other's\"        \"i.e.\"           \"brother's\"      \"wife's\"        \n [57] \"we've\"          \"well-known\"     \"lady's\"         \"twenty-four\"   \n [61] \"ma'am\"          \"enemy's\"        \"imp.\"           \"hasn't\"        \n [65] \"majesty's\"      \"viz.\"           \"mustn't\"        \"old-fashioned\" \n [69] \"friend's\"       \"so-called\"      \"re-use\"         \"aren't\"        \n [73] \"they'll\"        \"needn't\"        \"pub.\"           \"middle-aged\"   \n [77] \"she'd\"          \"t'\"             \"of.\"            \"oe.\"           \n [81] \"prof.\"          \"she'll\"         \"shan't\"         \"ne'er\"         \n [85] \"as.\"            \"they'd\"         \"we'd\"           \"here's\"        \n [89] \"they've\"        \"adj.\"           \"weren't\"        \"sq.\"           \n [93] \"gen.\"           \"cong.\"          \"col.\"           \"brother-in-law\"\n [97] \"son-in-law\"     \"e.g.\"           \"ch.\"            \"e-mail\"        \n[101] \"twenty-one\"     \"twenty-two\"     \"it'll\"          \"ft.\"           \n[105] \"self-control\"   \"anglo-saxon\"    \"ff.\"            \"forty-five\"    \n[109] \"'ll\"            \"Icel.\"          \"good-looking\"   \"p.m.\"          \n[113] \"e'er\"           \"twenty-three\"   \"thirty-six\"     \"a.m.\"          \n[117] \"father-in-law\"  \"e'en\"           \"seventy-five\"   \"'cause\"        \n[121] \"well-being\"     \"Mass.\"          \"thirty-two\"     \"self-\"         \n[125] \"twenty-eight\"   \"twenty-six\"     \"sister-in-law\"  \"three-quarters\"\n[129] \"'n'\"           \n```\n\n\n:::\n:::\n\n\n\n`\\W` matches any character that is not a number or a letter.\n\n21. Find words that do not have aeiou in the first four characters\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrep(\"^[^aeiouAEIOU]{4}\", words, value=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"system\"        \"physical\"      \"style\"         \"sympathy\"     \n [5] \"mysterious\"    \"mystery\"       \"physician\"     \"thyself\"      \n [9] \"sympathetic\"   \"mysteries\"     \"systems\"       \"Dryden\"       \n[13] \"symptoms\"      \"symbol\"        \"crystal\"       \"10th\"         \n[17] \"hymn\"          \"mystic\"        \"sympathies\"    \"Sydney\"       \n[21] \"12th\"          \"syllable\"      \"11th\"          \"rhyme\"        \n[25] \"symbols\"       \"physically\"    \"rhythm\"        \"systematic\"   \n[29] \"psychology\"    \"psychological\" \"p.m.\"          \"mystical\"     \n[33] \"mythology\"     \"myth\"          \"syllables\"     \"hysterical\"   \n```\n\n\n:::\n:::\n",
    "supporting": [
      "05_Regular_expressions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}